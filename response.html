<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Import Google Icon Font -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

  <title>Details of the Restaurant</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <!-- Custom Styles -->
  <style>
    /* Hero Section */
    .hero {
      position: relative;
      width: 100%;
      height: 50vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .hero-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    .hero-title {
      position: relative;
      color: white;
      font-size: 2.5rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      text-align: center;
      margin: 0;
    }

    .container {
      margin-top: 30px;
    }

    iframe {
      border: 0;
    }
  </style>
</head>

<body>
  <!-- Navigation Bar -->
  <nav>
    <div class="nav-wrapper indigo darken-3">
      <a href="#" class="brand-logo">Italian Restaurant</a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a href="https://tony-shieh.github.io/html/index4.html">Home</a></li>
      </ul>     
    </div>
  </nav>

  <!-- Hero Section -->
  <div class="hero">
    <img src="https://farm8.staticflickr.com/7421/14064705656_4e58a45502_c.jpg" alt="Restaurant" class="hero-image">
    <h1 class="hero-title">Restaurant Details</h1>
  </div>

  <!-- Main Content -->
  <div class="container">
    <div id="content"></div>
  </div>

  <!-- Footer Section -->
  <footer class="page-footer grey darken-3">
    <div class="container">
      <div class="row">
        <div class="col s12 m6">
          <h5 class="white-text">Italian Restaurant</h5>
          <p class="grey-text text-lighten-4">The best dining experience in the city!</p>
        </div>
        <div class="col s12 m6">
          <h5 class="white-text">Contact Us</h5>
          <p class="grey-text text-lighten-4">
            <i class="material-icons left">phone</i> 0912345678<br />
            <i class="material-icons left">email</i> info@italianrestaurant.com<br />
            <i class="material-icons left">place</i> Taichung, 123 Main Street
          </p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="../layout/scripts/jquery.min.js"></script>
  <script src="../layout/scripts/jquery.mobilemenu.js"></script>

  <script>
    // Data storage arrays
    let img = [], team = [], establish = [], rate = [], home = [], field = [], intro1 = [];

    function processSheetsData(response) {
      var data = response.getDataTable();
      var rows = data.getNumberOfRows();

      // Fetch data from Google Sheets
      for (var r = 0; r < rows; r++) {
        img[r] = data.getFormattedValue(r, 0);
        team[r] = data.getFormattedValue(r, 1);
        establish[r] = data.getFormattedValue(r, 2);
        rate[r] = data.getFormattedValue(r, 3);
        home[r] = data.getFormattedValue(r, 4);
        field[r] = data.getFormattedValue(r, 5);
        intro1[r] = data.getFormattedValue(r, 6);
      }

      // Get restaurant ID from URL
      var X = decodeURIComponent(GetUrlVar('id'));
      var i = Number(X);
      var str = "";
      
      // Create content dynamically
      str += "<img src='" + img[i] + "' width='80%' height='80%'/>"; 
      str += '<br><p>Restaurant Name: ' + team[i] + '</p>';
      str += '<p>Established Year: ' + establish[i] + '</p>';
      str += '<p>Rate: ' + rate[i] + '</p>';
      str += '<p>Introduction: ' + intro1[i] + '</p>';
      str += '<p>Location: ' + home[i] + '</p>';
      str += '<iframe width="100%" height="300" src="https://maps.google.com.tw/maps?f=q&h1=zh-TW&q=' + field[i] + '&z=16&t=q&output=embed"></iframe>';

      document.getElementById("content").innerHTML = str;
    }

    // Fetch the Google Sheets data
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(init);

    function init() {
      var url = 'https://docs.google.com/spreadsheets/d/1fEE4VD_LgyOttC7j5ysIi_EXZFXMLUcWTFSCDmIDP2s/gviz/tq?sheet=工作表2';
      var query = new google.visualization.Query(url);
      query.setQuery('select *');
      query.send(processSheetsData);
    }
    
    // Utility function to get URL parameter
    function GetUrlVar(VarName) {
      var name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
      var regexS = "[\\?&]" + VarName + "=([^&#]*)";
      var regex = new RegExp(regexS);
      var results = regex.exec(window.location.href);
      if (results == null)
        return "";
      else
        return results[1];
    }
  </script>
</body>
</html>
